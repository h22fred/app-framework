function maf_confirmAction(b){return window.confirm(b)}function maf_password_rating(b){if(8>b.length)return 0;var a=0;b.match("[a-z]+")&&a++;b.match("[A-Z]+")&&a++;b.match("[0-9]+")&&a++;b.match("[`~!@#\\$%\\^&\\*\\(\\)_\\-\\+=\\{\\}\\[\\]\\\\\\|:;\"'<>,\\.\\?\\/]+")&&a++;return 2>a?0:2<a?2:1}function maf_formatNumber(b,a){return b.toFixed(Math.max(a,(b.toString().split(".")[1]||[]).length))}
function maf_performPostJsonReceiveHtml(b,a,c,e){maf_performPost("application/json; charset=utf-8","html",b,a,c,e)}function maf_performPostJsonReceiveJson(b,a,c,e){maf_performPost("application/json; charset=utf-8","json",b,a,c,e)}function maf_performPost(b,a,c,e,d,g){$.ajax({type:"POST",dataType:a,contentType:b,url:c,data:e}).done(d).fail(g)}
function maf_load_value_holders_in_select(b,a){var c=$.map(a,function(a,b){return[a]});c.sort(maf_sort_value_holder);$("#"+b).html("");for(var e=0;e<c.length;e++){var d=c[e];$("#"+b).append($("<option>",{value:d.value,text:d.name}))}}function maf_sort_value_holder(b,a){return b.name.toLowerCase()<a.name.toLowerCase()?-1:b.name.toLowerCase()>a.name.toLowerCase()?1:0}function maf_diff_valueholders_collection(b,a){var c={},e;for(e in b){var d=b[e];a[e]||(c[d.value]=d)}return c}
function maf_queryString(b){var a=null;b=(new RegExp("[\\?&#]"+b+"=([^&#]*)")).exec("?"+window.location.href.split("?")[1]);null!=b&&(a=decodeURIComponent(b[1].replace(/\+/g," ")));return a}
function maf_displayErrors(b,a,c){$("#"+b+' [id*="_field"] .help-inline').html("");if($.isEmptyObject(a))$("#"+b+' [id*="_field"] .help-inline').html(""),$("#"+b+"_errors").css("display","none"),$("#"+b+"_errors strong").html("");else for(fieldName in $("#"+b+"_errors").css("display","inline"),$("#"+b+"_errors strong").html(c),a)$("#"+b+" #"+fieldName+"_field .help-inline").html(a[fieldName])}function maf_flashErrorMessage(b){maf_flashMessage(b,"alert-error")}
function maf_flashSuccessMessage(b){maf_flashMessage(b,"alert-success")}function maf_clearFlash(b){maf_flashHtmlContent("")}function maf_flashMessage(b,a){maf_flashHtmlContent('<div class="alert '+a+'">'+b+"</div>")}function maf_flashHtmlContent(b){$("#maf-flash-message").html(b)}
function maf_sort(b,a,c){var e=window[b],d=$(a);b=d.find('i[class*="fa"]');a="fa fa-chevron-down"==b.attr("class");var g=$("#"+c+" th").index(d),f=[];$("#"+c+" tr").each(function(a){var b=$(this).attr("id");b&&(a={},a.id=b,b=$(this).find("td:eq("+g+")").text(),a.value=b,f.push(a))});f.sort(function(a,b){var c=a.id.toLowerCase(),d=b.id.toLowerCase();return c<d?-1:c>d?1:0});f.sort(function(a,b){return e(a,b)});a&&f.reverse();c=$("#"+c+" tbody");for(d=0;d<f.length;d++){var h=$("#"+f[d].id);h.remove();
c.prepend(h)}a?b.removeClass("fa-chevron-down").addClass("fa-chevron-up"):b.removeClass("fa-chevron-up").addClass("fa-chevron-down")}function maf_stringSort(b,a){var c=b.value.toLowerCase(),e=a.value.toLowerCase();return c<e?-1:c>e?1:0}function maf_numberSort(b,a){return b.value-a.value}
function maf_dateSort(b,a){try{dateA=b.value.split("/");var c=new Date(dateA[2],dateA[1]-1,dateA[0]);dateB=a.value.split("/");var e=new Date(dateB[2],dateB[1]-1,dateB[0])}catch(d){c=new Date(b.value),e=new Date(a.value)}return c-e}
function maf_dateAndTimeSort(b,a){try{dateA=b.value.split("/");dayHoursMinA=dateA[2].split(" ");hoursMinA=dayHoursMinA[1].split(":");var c=new Date(dayHoursMinA[0],dateA[1]-1,dateA[0],hoursMinA[0],hoursMinA[1],0,0);dateB=a.value.split("/");dayHoursMinB=dateB[2].split(" ");hoursMinB=dayHoursMinB[1].split(":");var e=new Date(dayHoursMinB[0],dateB[1]-1,dateB[0],hoursMinB[0],hoursMinB[1],0,0)}catch(d){c=new Date(b.value),e=new Date(a.value)}return c-e}
function maf_orderSort(b,a){return b.order-a.order}
function maf_filter_sort_url(b,a,c){if(a){var e=a.userColumnConfiguration[b].sortType;if(e&&"NONE"!=e){"UNSORTED"==e&&(e=a.userColumnConfiguration[b].sortType="DESC");var d=$(column).find('i[class*="fa"]');"fa fa-folder"==d.attr("class")&&("DESC"==e?d.removeClass("fa-sort").addClass("fa-chevron-up"):d.removeClass("fa-sort").addClass("fa-chevron-down"));"fa fa-chevron-down"==d.attr("class")?(a.userColumnConfiguration[b].sortType="ASC",d.removeClass("fa-chevron-down").addClass("fa-chevron-up")):(a.userColumnConfiguration[b].sortType=
"DESC",d.removeClass("fa-chevron-up").addClass("fa-chevron-down"));c.apply()}}}
function maf_filter_updateFilterContainer(b,a,c,e,d){$("#"+b+" li").each(function(a){a=$(this).attr("id");a=a.substring(11);!d&&c.userColumnConfiguration[a].isFiltered||$(this).remove()});for(columnId in c.userColumnConfiguration){var g=$("#"+b+" li#_filter_cp_"+columnId).length;if(c.userColumnConfiguration[columnId].isFiltered&&!g){g=c.selectableColumns[columnId];if("CHECKBOX"==g.type){var f={label:g.name,defaultValue:c.userColumnConfiguration[columnId].filterValue};maf_filter_addCheckboxField(b,
columnId,a,f,c,e)}"TEXTFIELD"==g.type&&(f={label:g.name,defaultValue:c.userColumnConfiguration[columnId].filterValue},maf_filter_addTextField(b,columnId,a,f,c,e));"NUMERIC"==g.type&&(f={label:g.name,defaultValue:c.userColumnConfiguration[columnId].filterValue.value,defaultComparator:c.userColumnConfiguration[columnId].filterValue.comparator},maf_filter_addNumericField(b,columnId,a,f,c,e));"DATERANGE"==g.type&&(f={label:g.name,fromDefaultValue:new Date(c.userColumnConfiguration[columnId].filterValue.from),
toDefaultValue:new Date(c.userColumnConfiguration[columnId].filterValue.to),format:g.format},maf_filter_addDateRangeField(b,columnId,a,f,c,e));"SELECT"==g.type&&(f={label:g.name,defaultValue:c.userColumnConfiguration[columnId].filterValue,values:g.values},maf_filter_addSelect(b,columnId,a,f,c,e));"AUTOCOMPLETE"==g.type&&(f={label:g.name,url:g.url,defaultValue:c.userColumnConfiguration[columnId].filterValue},maf_filter_addAutocomplete(b,columnId,a,f,c,e))}}}
function maf_filter_prepareSortableColumns(b,a,c,e){for(columnId in c.userColumnConfiguration)if(c.userColumnConfiguration[columnId].isDisplayed&&"NONE"!=c.userColumnConfiguration[columnId].sortType){var d=$("#"+b+" th#_"+a+"_"+columnId),g=d.html();d.html("");var f=$("<a/>",{href:"#"});f.html(g+'&nbsp;<i class="fa"></i>');d.append(f);d=$("#"+b+" th#_"+a+"_"+columnId+" a i");maf_filter_setSortOrder(d,columnId,c);f.click(function(a,b,c,d,e){return function(f){f.preventDefault();"DESC"==d.userColumnConfiguration[c].sortType?
d.userColumnConfiguration[c].sortType="ASC":"ASC"==d.userColumnConfiguration[c].sortType?d.userColumnConfiguration[c].sortType="DESC":"UNSORTED"==d.userColumnConfiguration[c].sortType&&(d.userColumnConfiguration[c].sortType="ASC");f=$("#"+a+" th#_"+b+"_"+c+" a i");maf_filter_setSortOrder(f,c,d);for(otherColumnId in d.userColumnConfiguration)otherColumnId!=c&&"NONE"!=d.userColumnConfiguration[otherColumnId].sortType&&(d.userColumnConfiguration[otherColumnId].sortType="UNSORTED",f=$("#"+a+" th#_"+b+
"_"+otherColumnId+" a i"),maf_filter_setSortOrder(f,otherColumnId,d));e.apply()}}(b,a,columnId,c,e))}}
function maf_filter_setSortOrder(b,a,c){"UNSORTED"==c.userColumnConfiguration[a].sortType&&(b.removeClass("fa-chevron-up"),b.removeClass("fa-chevron-down"));"DESC"==c.userColumnConfiguration[a].sortType&&(b.removeClass("fa-chevron-up"),b.hasClass("fa-chevron-down")||b.addClass("fa-chevron-down"));"ASC"==c.userColumnConfiguration[a].sortType&&(b.removeClass("fa-chevron-down"),b.hasClass("fa-chevron-up")||b.addClass("fa-chevron-up"))}
function maf_filter_prepareColumnsSelector(b,a,c,e,d){var g=getSourceAndValueForDisplayedColumns(e);$("#"+a).editable({title:_maf_translations.columnsSelectorTitle,type:"checklist",placement:"bottom",showbuttons:"bottom",onblur:"submit",display:!1,value:g.value,source:g.source,success:function(a,g){var k=0;for(columnId in e.userColumnConfiguration)-1!=jQuery.inArray(k+"",g)?e.userColumnConfiguration[columnId].isDisplayed=!0:e.userColumnConfiguration[columnId].isDisplayed=!1,k++;k=getSourceAndValueForFilteredColumns(e);
k.source.length?($("#"+c).show(),$("#"+c).editable("enable"),$("#"+c).editable("option","source",k.source),$("#"+c).editable("setValue",k.value)):($("#"+c).editable("disable"),$("#"+c).hide());maf_filter_updateFilterContainer(b,c,e,d,!0);d.apply()}})}
function maf_filter_prepareFiltersSelector(b,a,c,e){var d=getSourceAndValueForFilteredColumns(c);$("#"+a).editable({title:_maf_translations.filtersSelectorTitle,type:"checklist",placement:"bottom",showbuttons:"bottom",onblur:"submit",display:!1,value:d.value,source:d.source,success:function(d,f){var h=0;for(columnId in c.userColumnConfiguration)"NONE"!=c.selectableColumns[columnId].type&&(-1!=jQuery.inArray(h+"",f)?c.userColumnConfiguration[columnId].isFiltered=!0:c.userColumnConfiguration[columnId].isFiltered=
!1,h++);c.currentPage=0;maf_filter_updateFilterContainer(b,a,c,e,!0);e.apply()}})}
function getSourceAndValueForDisplayedColumns(b){var a=0,c=0,e=[],d=[];for(columnId in b.userColumnConfiguration)d[a]={},d[a].value=a,d[a].isKpi=b.selectableColumns[columnId].isKpi,d[a].text="",b.selectableColumns[columnId].isKpi&&(d[a].text+=_maf_translations.kpi+" - "),d[a].text+=b.selectableColumns[columnId].name,b.userColumnConfiguration[columnId].isDisplayed&&(e[c]=a,c++),a++;d.sort(maf_sort_result_source);b={};b.value=e;b.source=d;return b}
function getSourceAndValueForFilteredColumns(b){var a=0,c=0,e=[],d=[];for(columnId in b.userColumnConfiguration)"NONE"!=b.selectableColumns[columnId].type&&(d[a]={},d[a].value=a,d[a].isKpi=b.selectableColumns[columnId].isKpi,d[a].text="",b.selectableColumns[columnId].isKpi&&(d[a].text+=_maf_translations.kpi+" - "),d[a].text+=b.selectableColumns[columnId].name,b.userColumnConfiguration[columnId].isFiltered&&(e[c]=a,c++),a++);d.sort(maf_sort_result_source);b={};b.value=e;b.source=d;return b}
function maf_sort_result_source(b,a){return 1==b.isKpi&&0==a.isKpi?1:0==b.isKpi&&1==a.isKpi||b.text<a.text?-1:b.text>a.text?1:0}
function maf_filter_addCheckboxField(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e),h=$("<a/>",{href:"#",id:a});f.append(h);$("#"+b).append(f);f=[];e.defaultValue&&(f[0]=1);$("#"+b).find("#"+a).editable({title:e.label,type:"checklist",emptytext:_maf_translations.unchecked,value:f,source:[{value:1,text:_maf_translations.checked}],success:function(b,c){d.userColumnConfiguration[a].filterValue=0!=c.length;d.currentPage=0;g.apply()}});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_addTextField(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e),h=$("<a/>",{href:"#",id:a});f.append(h);$("#"+b).append(f);$("#"+b).find("#"+a).editable({title:e.label,emptytext:_maf_translations.empty,type:"text",value:e.defaultValue,success:function(b,c){d.userColumnConfiguration[a].filterValue=c;d.currentPage=0;g.apply()}});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_addNumericField(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e),h=$("<a/>",{href:"#",id:a+"Comparator"});f.append(h);f.append("&nbsp;&nbsp;");h=$("<a/>",{href:"#",id:a});f.append(h);$("#"+b).append(f);$("#"+b).find("#"+a).editable({title:e.label,emptytext:_maf_translations.empty,type:"text",value:e.defaultValue,success:function(b,c){d.userColumnConfiguration[a].filterValue||(d.userColumnConfiguration[a].filterValue={});d.currentPage=0;d.userColumnConfiguration[a].filterValue.value=
c;g.apply()}});$("#"+b).find("#"+a+"Comparator").editable({title:e.label,type:"select",value:e.defaultComparator,source:"= <> > >= < <=".split(" "),success:function(b,c){d.userColumnConfiguration[a].filterValue||(d.userColumnConfiguration[a].filterValue={});d.currentPage=0;d.userColumnConfiguration[a].filterValue.comparator=c;g.apply()}});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_addDateRangeField(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e);f.append(_maf_translations.from+"&nbsp;");var h=$("<a/>",{href:"#",id:a+"From"});f.append(h);f.append("&nbsp;"+_maf_translations.to+"&nbsp;");h=$("<a/>",{href:"#",id:a+"To"});f.append(h);$("#"+b).append(f);$("#"+b).find("#"+a+"From").editable({placement:"bottom",type:"date",clear:!1,datepicker:{language:_maf_language},title:_maf_translations.from,value:e.fromDefaultValue,format:e.format,success:function(b,
c){d.userColumnConfiguration[a].filterValue||(d.userColumnConfiguration[a].filterValue={});d.currentPage=0;d.userColumnConfiguration[a].filterValue.from=c;g.apply()}});$("#"+b).find("#"+a+"To").editable({placement:"bottom",type:"date",clear:!1,datepicker:{language:_maf_language},title:_maf_translations.to,value:e.toDefaultValue,format:e.format,success:function(b,c){d.userColumnConfiguration[a].filterValue||(d.userColumnConfiguration[a].filterValue={});d.currentPage=0;d.userColumnConfiguration[a].filterValue.to=
c;g.apply()}});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_addSelect(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e),h=$("<a/>",{href:"#",id:a});f.append(h);$("#"+b).append(f);var f=[],h=[],k=0,l=0;for(key in e.values)f[l]={},f[l].value=e.values[key].value,f[l].text=e.values[key].name,f[l].order=e.values[key].order,0<=e.defaultValue.indexOf(e.values[key].value)&&(h[k]=e.values[key].value,k++),l++;f.sort(maf_orderSort);$("#"+b).find("#"+a).editable({title:e.label,type:"checklist",placement:"bottom",value:h,source:f,success:function(b,
c){d.userColumnConfiguration[a].filterValue=c;d.currentPage=0;g.apply()}});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_addAutocomplete(b,a,c,e,d,g){var f=maf_filter_construct_field_header(a,e),h=$("<a/>",{href:"#",id:"_"+a+"_editable"});f.append(h);var h=$("<input/>",{type:"hidden",name:a,id:a,value:""}),k=$("<input/>",{type:"hidden",name:a+"_content",id:a+"_content",value:""});f.append(h);f.append(k);h=$("<a/>",{href:"#",id:"_"+a+"_clear_editable","class":"btn btn-default btn-sm"});h.append($("<span/>",{"class":"fa fa-eraser"}));f.append(" &nbsp;");f.append(h);$("#"+b).append(f);$("#"+b).find("#_"+
a+"_clear_editable").click(function(c){c.preventDefault();$("#"+b).find("#_"+a+"_editable").editable("setValue",null);$("#"+b).find("#"+a).val(null);$("#"+b).find("#"+a+"_content").val("");d.userColumnConfiguration[a].filterValue={value:null,content:""};d.currentPage=0;g.apply()});window[a+"_editableCache"]={};""!=e.defaultValue.content&&(window[a+"_editableCache"][e.defaultValue.value]={name:e.defaultValue.content});maf_activateEditable_for_autocomplete(window[a+"_editableCache"],b,a,e.defaultValue.value,
"",e.url,"",function(b,c){d.userColumnConfiguration[a].filterValue={value:b,content:c};d.currentPage=0;g.apply()});maf_filter_add_remove_event(b,a,c,d,g)}
function maf_filter_construct_field_header(b,a){var c=$("<li/>",{"class":"filter-input",id:"_filter_cp_"+b}),e=$("<div/>",{"class":"pull-left"}),d=$("<div/>",{"class":"pull-right"}),g=$("<div/>",{"class":"clearfix"}),f=$("<a/>",{href:"#",id:"_filter_remove_"+b,html:"<span class='fa fa-times'></span>"}),h=$("<strong/>",{text:a.label});e.append(h);d.append("&nbsp;&nbsp;");d.append(f);c.append(e);c.append(d);c.append(g);return c}
function maf_filter_add_remove_event(b,a,c,e,d){$("#"+b).find("#_filter_remove_"+a).click(function(g){g.preventDefault();e.userColumnConfiguration[a].isFiltered=!1;g=getSourceAndValueForFilteredColumns(e);$("#"+c).editable("setValue",g.value);e.currentPage=0;maf_filter_updateFilterContainer(b,c,e,d,!1);d.apply()})}
function maf_activateEditable_for_autocomplete(b,a,c,e,d,g,f,h){var k;k=""==a?$("html"):$("#"+a);b[e]&&(k.find("#"+c).val(e),k.find("#"+c+"_content").val(b[e].name));k.find("#_"+c+"_editable").editable({title:"fieldLabel",mode:"inline",type:"typeaheadjs",onblur:"submit",value:k.find("#"+c+"_content").val(),valueKey:"name",typeahead:{remote:{url:g+"?query=%QUERY"+f,filter:function(a){var c=[];for(value in a)b[value]=a[value],c.push(a[value].name);return c}}},validate:function(a){var d=!1;for(value in b)b[value].name==
a&&(d=!0);if(!d)return{newValue:k.find("#"+c+"_content").val()}},success:function(a,d){for(value in b)if(b[value].name==d){k.find("#"+c).val(value).trigger("change");k.find("#"+c+"_content").val(d);h&&h.apply(this,[value,d]);break}}})};